---
- name: hive_test_1
  active: true
  trigger: once
  status: ""
  stage1: hive.write target:"mobilize/hive_test_1", partitions:"act_date", drop:true,
            source:"Runner_mobilize(test)/hive_test_1.in", schema:"hive_test_1.schema"
  stage2: hive.run source:"hive_test_1.hql"
  stage3: hive.run hql:"show databases;"
  stage4: gsheet.write source:"stage2", target:"hive_test_1_stage_2.out"
  stage5: gsheet.write source:"stage3", target:"hive_test_1_stage_3.out"
- name: hive_test_2
  active: true
  trigger: after hive_test_1
  status: ""
  stage1: hive.write source:"hdfs://user/mobilize/test/test_hdfs_1.out", target:"mobilize.hive_test_2", drop:true
  stage2: hive.run hql:"select * from mobilize.hive_test_2;"
  stage3: gsheet.write source:"stage2", target:"hive_test_2.out"
- name: hive_test_3
  active: true
  trigger: after hive_test_2
  status: ""
  stage1: hive.run hql:"select '@date' as `date`,product,category,value from mobilize.hive_test_1;", params:{'date':'2013-01-01'}
  stage2: hive.write source:"stage1",target:"mobilize/hive_test_3", partitions:"date/product", drop:true
  stage3: hive.write hql:"select * from mobilize.hive_test_3;",target:"mobilize/hive_test_3", partitions:"date/product", drop:false
  stage4: gsheet.write source:"hive://mobilize/hive_test_3", target:"hive_test_3.out"
- name: hive_test_4
  active: true
  trigger: after hive_test_3
  status: ""
  stage1: hive.write source:"hive_test_4_stage_1.in", target:"mobilize/hive_test_1", partitions:"act_date"
  stage2: hive.write source:"hive_test_4_stage_2.in", target:"mobilize/hive_test_1", partitions:"act_date"
  stage3: hive.run hql:"select '$utc_date $utc_time' as `date_time`,product,category,value from mobilize.hive_test_1;"
  stage4: gsheet.write source:stage3, target:"hive_test_4.out"
